language: r
cache: packages
sudo: false
fast_finish: true
install:
  - pip install awscli --upgrade --user
  - Rscript -e 'install.packages(c("readxl", "rjson", "stringr", "xlsx", "tm", "slam"))'
  - Rscript -e 'source("https://bioconductor.org/biocLite.R"); biocLite("org.Hs.eg.db")'
stages:
  - name: validate
  - name: deploy
    if: branch = master AND type = push
jobs:
  include:
    - stage: validate
    script:
      - cd code
      - Rscript ./AACR2018.R
    - stage: deploy
      - aws sync ../interactome/ s3://cancerxxxx
